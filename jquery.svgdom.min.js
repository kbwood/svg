/* http://keith-wood.name/svg.html
   SVG/jQuery DOM compatibility for jQuery v1.4.0.
   Written by Keith Wood (kbwood{at}iinet.com.au) April 2009.
   Dual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and 
   MIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses. 
   Please attribute the author if you use it. */
(function($){var f=$.fn.addClass;$.fn.addClass=function(c){c=c||'';var d=function(a,b){return b+($.inArray(a,b.split(/\s+/))==-1?(b?' ':'')+a:'')};return this.each(function(){if(isSVGElem(this)){var b=this;$.each(c.split(/\s+/),function(i,a){if(b.className){b.className.baseVal=d(a,b.className.baseVal)}else{b.setAttribute('class',d(a,b.getAttribute('class')))}})}else{f.apply($(this),[c])}})};var g=$.fn.removeClass;$.fn.removeClass=function(d){d=d||'';var e=function(a,b){b=b.split(/\s+/);var c=$.inArray(a,b);return $.grep(b,function(n,i){return i!=c}).join(' ')};return this.each(function(){if(isSVGElem(this)){var b=this;$.each(d.split(/\s+/),function(i,a){if(b.className){b.className.baseVal=e(a,b.className.baseVal)}else{b.setAttribute('class',e(a,b.getAttribute('class')))}})}else{g.apply($(this),[d])}})};var h=$.fn.toggleClass;$.fn.toggleClass=function(a,b){return this.each(function(){if(isSVGElem(this)){if(typeof b!=='boolean'){b=!$(this).hasClass(a)}$(this)[(b?'add':'remove')+'Class'](a)}else{h.apply($(this),[a,b])}})};var j=$.fn.hasClass;$.fn.hasClass=function(b){b=b||'';var c=false;this.each(function(){if(isSVGElem(this)){var a=(this.className?this.className.baseVal:this.getAttribute('class')).split(/\s+/);if($.inArray(b,a)>-1){c=true}}else{if(j.apply($(this),[b])){c=true}}return!c});return c};var k=$.fn.attr;$.fn.attr=function(a,b,c){if(typeof a==='string'&&b===undefined){var d=k.apply(this,[a,b,c]);return(d&&d.baseVal?d.baseVal.valueAsString:d)}return this.each(function(){if(isSVGElem(this)){if(typeof a=='object'){for(var n in a){this.setAttribute(n,a[n])}}else{this.setAttribute(a,(typeof b=='function'?b():b))}}else{k.apply($(this),[a,b,c])}})};var l=$.fn.removeAttr;$.fn.removeAttr=function(a){return this.each(function(){if(isSVGElem(this)){if(this[a]&&this[a].baseVal){this[a].baseVal.value=''}else{this.setAttribute(a,'')}}else{l.apply($(this),[a])}})};function isSVGElem(a){return(a.nodeType==1&&a.namespaceURI==$.svg.svgNS)}})(jQuery);